# Cell TTA main configuration file
defaults:
  - model: combined_cell
  - data: cell
  - trainer: default
  - experiment: null  # Override with experiment configs
  - _self_

# Paths
work_dir: ${hydra:runtime.output_dir}
data_root: "/path/to/cell/dataset/"  # UPDATE THIS: path to cell dataset

# Experiment settings
seed: 42
experiment_name: "cell_tta"

# TTA settings
tta:
  continual: false  # If false, reset model between tasks
  update_auxiliary: true  # Update generative model
  update_task_norm_only: false  # Only update task model norms
  forward_mode: "normed_logits_with_logits"  # DUSA default

# Optimizer settings
optimizer:
  learning_rate: 4e-5
  weight_decay: 0.0
  scheduler:
    name: "null"

# Logging
logging:
  use_wandb: true
  wandb_project: "cell-tta"
  wandb_entity: null  # Set to your W&B username/team
  log_aux_metrics: true
  enable_sample_logging: false
  sample_log_dir: "${work_dir}/sample_logs"

# Hydra settings
hydra:
  run:
    dir: outputs/${experiment_name}/${now:%Y-%m-%d}/${now:%H-%M-%S}
  sweep:
    dir: multirun/${experiment_name}/${now:%Y-%m-%d}/${now:%H-%M-%S}
    subdir: ${hydra.job.num}
